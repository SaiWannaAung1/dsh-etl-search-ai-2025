```aiignore

Yes, absolutely. Even though this is the "Domain Foundation" layer, testing here is critical because these rules define the integrity of your data for the entire system.

For Task 1.1, we need Unit Tests. Integration tests are not necessary yet because the Domain layer has no external dependencies (no database, no API).

Why Unit Test the Domain?

We need to ensure a Dataset or MetadataRecord cannot be created in an invalid state. For example:
    Can a Dataset exist without a SourceIdentifier? (Should throw an error).
    Does ToEmbeddingText() correctly combine the title and abstract?


Implementation: Domain Unit Tests

Create a new file DshEtlSearch.Tests/Core/DomainEntityTests.cs. This uses xUnit (Fact/Theory) and FluentAssertions (standard C# assertion style) or standard Assert.

File: backend/DshEtlSearch.Tests/Core/DomainEntityTests.cs

using Xunit;
using DshEtlSearch.Core.Domain;
using DshEtlSearch.Core.Common.Enums;

namespace DshEtlSearch.Tests.Core
{
    public class DomainEntityTests
    {
        [Fact]
        public void Dataset_Should_Throw_If_SourceIdentifier_Is_Null()
        {
            // Arrange & Act & Assert
            Assert.Throws<ArgumentNullException>(() => new Dataset(null));
        }

        [Fact]
        public void Dataset_Should_Initialize_Correctly()
        {
            // Arrange
            string sourceId = "doi:10.1000/xyz";

            // Act
            var dataset = new Dataset(sourceId);

            // Assert
            Assert.NotNull(dataset);
            Assert.NotEqual(Guid.Empty, dataset.Id);
            Assert.Equal(sourceId, dataset.SourceIdentifier);
            Assert.True(dataset.IngestedAt <= DateTime.UtcNow);
            Assert.Empty(dataset.Documents);
        }

        [Fact]
        public void AddDocument_Should_Add_To_Collection()
        {
            // Arrange
            var dataset = new Dataset("doi:123");
            
            // Act
            dataset.AddDocument("report.pdf", FileType.Pdf, 1024);

            // Assert
            Assert.Single(dataset.Documents);
            Assert.Equal("report.pdf", dataset.Documents[0].FileName);
            Assert.Equal(FileType.Pdf, dataset.Documents[0].Type);
        }

        [Fact]
        public void MetadataRecord_ToEmbeddingText_Should_Combine_Fields()
        {
            // Arrange
            var record = new MetadataRecord
            {
                Title = "Flood Risk 2024",
                Abstract = "A study on water levels.",
                Keywords = "flood, water, rain"
            };

            // Act
            var text = record.ToEmbeddingText();

            // Assert
            Assert.Contains("Title: Flood Risk 2024", text);
            Assert.Contains("Abstract: A study on water levels.", text);
            Assert.Contains("Keywords: flood, water, rain", text);
        }
    }
}


Next Steps to Run This
    Add the file to your DshEtlSearch.Tests project.
    Run the test using the command line:
    dotnet test ./backend/DshEtlSearch.Tests/DshEtlSearch.Tests.csproj --verbosity normal
If these pass, your Core Domain logic is validated and safe to merge. Would you like to proceed to Task 1.2 (SQLite Infrastructure)?
```