Here is the updated High-Level System Architecture diagram.

I have removed the external CEH Catalogue from the "Data Storage" section (since it is not part of your internal persistence layer) and added a direct relationship link between SQLite and the Vector Store to represent the shared DatasetID that binds the relational data to the semantic embeddings.

Revised High-Level System Architecture

```aiignore
+-----------------------------------------------------------------------+
|                            1. FRONTEND                                |
|                                                                       |
|   +---------------------+                                             |
|   |   Svelte Web App    |  (User Interface / Client Side)             |
|   |  (shadcn-ui/Vue)    [cite_start]|  [cite: 121]                                |
|   +----------+----------+                                             |
+--------------|--------------------------------------------------------+
               |
               | HTTP / JSON Requests
               v
+--------------|--------------------------------------------------------+
|                            2. BACKEND                                 |
|                     (C# ASP.NET Core Solution)                        |
|                                                                       |
|    +-------------------------------------------------------------+    |
|    |  Layer A: Web API (Presentation)                            |    |
|    |  - Controllers (SearchController, ChatController)           |    |
|    |  - Response Caching Middleware                              |    |
|    +--------------------------+----------------------------------+    |
|                               | Uses                                  |
|                               v                                       |
|    +-------------------------------------------------------------+    |
|    |  Layer B: Application Core (Business Logic)                 |    |
|    |  - Use Cases: EtlOrchestrator, SearchService                |    |
|    |  - Interfaces: IRepository, IVectorStore, IEtlService       |    |
|    |  - Domain Entities: Dataset, MetadataRecord                 |    |
|    +--------------------------^----------------------------------+    |
|                               ^                                       |
|                               | Implements Interfaces                |
|    +--------------------------+----------------------------------+    |
|    |  Layer C: Infrastructure (Data Access & Ext. Services)      |    |
|    |  - SQLite Repository (Entity Framework Core)                |    |
|    |  - Vector Store Implementation (Semantic Kernel)            |    |
|    |  - CEH External Connector (Http/Zip Adapters)               |    |
|    +-------------------------------------------------------------+    |
+-------------------------------|---------------------------------------+
                                | Reads / Writes
                                v
+-------------------------------|---------------------------------------+
|                         3. DATA STORAGE                               |
|                     (Persistence Layer)                               |
|                                                                       |
|    +----------------+                  +----------------+             |
|    | SQLite DB File | <--------------> |  Vector Store  |             |
|    | (Relational)   |   (Shared IDs)   |  (Embeddings)  |             |
|    +----------------+                  +----------------+             |
[cite_start]|       [cite: 51]                          [cite_start][cite: 115]                 |
+-----------------------------------------------------------------------+
```

Key Updates:

1. Linked Data Stores: A connection <---> now exists between SQLite and the Vector Store. This represents the logical relationship where a vector embedding (e.g., for a Title) is tagged with the specific DatasetID that exists in the SQLite relational tables.
2. Clean "Data Storage" Tier: The CEH Catalogue is gone. This section now strictly represents the system's state (the data you own and manage).
3. Backend Sublayers: The internal structure confirms that the Infrastructure Layer (which talks to the databases) depends on the Core Layer (which defines the rules), adhering to Clean Architecture.

Next Step

To implement this, you will need to define the Domain Entities in Layer B first. Would you like me to generate the C# Class definitions for Dataset and MetadataRecord to get you started?